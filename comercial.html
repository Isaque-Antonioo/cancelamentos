<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dashboard Comercial - Métricas e Performance">
    <title>Hubstrom - Comercial</title>

    <!-- Favicon Hubstrom -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cpath d='M161 85c2.7-1.2 5.6.8 5.6 3.7v50.3c0 1.6-.9 3-2.4 3.7L35.2 199.9c-.9.4-1.9-.3-1.9-1.2v-54.4c0-1.6.9-3 2.4-3.7L161 85z' fill='%2335CCA3'/%3E%3Cpath d='M164.8.1c.9-.4 1.9.3 1.9 1.2v54.4c0 1.6-.9 3-2.4 3.7L39 114.9c-2.7 1.2-5.6-.8-5.6-3.7V61c0-1.6.9-3 2.4-3.7L164.8.1z' fill='%2335CCA3'/%3E%3C/svg%3E">

    <!-- Estilos -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- Estilos específicos para o embed -->
    <style>
        .dashboard-container {
            width: 100%;
            height: calc(100vh - 120px);
            background: #0f172a;
            border-radius: 16px;
            overflow: hidden;
            position: relative;
        }

        .dashboard-container iframe {
            width: calc(100% + 17px); /* Esconder scrollbar */
            height: 100%;
            border: none;
            background: #0f172a;
        }

        /* Barra para cobrir o rodapé do Looker */
        .dashboard-container::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 17px;
            height: 28px;
            background: #0f172a;
            z-index: 10;
            pointer-events: none;
        }

        /* Loading overlay */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0f172a;
            display: flex;
            
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            transition: opacity 0.5s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-overlay .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(53, 204, 163, 0.2);
            border-top-color: #35cca3;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-overlay p {
            margin-top: 20px;
            color: #94a3b8;
            font-size: 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Header específico */
        .page-header {
            margin-bottom: 20px;
        }

        .page-header h1 {
            color: #35cca3;
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .page-header p {
            color: #94a3b8;
            font-size: 0.95rem;
        }

        /* Responsivo */
        @media (max-width: 768px) {
            .dashboard-container {
                height: calc(100vh - 140px);
                border-radius: 12px;
            }
        }
    </style>

    <!-- Verificacao de autenticacao -->
    <script src="js/auth.js"></script>
</head>
<body>
    <div class="container">
        <!-- Menu Lateral -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3>Dashboards</h3>
                <button class="sidebar-close" onclick="toggleSidebar()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <a href="index.html">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 20V10M12 20V4M6 20v-6"/>
                        </svg>
                        <span>Cancelamentos</span>
                    </a>
                </li>
                <li class="sidebar-item active">
                    <a href="comercial.html">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="1" x2="12" y2="23"/>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                        </svg>
                        <span>Comercial</span>
                    </a>
                </li>
                <li class="sidebar-item disabled">
                    <a href="#">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                        </svg>
                        <span>CS</span>
                        <span class="badge-soon">Em breve</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="suporte.html">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span>Suporte</span>
                    </a>
                </li>
            </ul>
        </nav>
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

        <header class="header">
            <div class="header-top">
                <button class="hamburger-btn" onclick="toggleSidebar()" title="Menu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <div class="header-logo">
                    <svg width="40" height="40" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M161.005 85.0084C163.673 83.8275 166.601 85.7957 166.601 88.6823V139.002C166.601 140.576 165.691 142.019 164.194 142.675L35.2207 199.883C34.3097 200.277 33.3335 199.621 33.3335 198.637V144.25C33.3335 142.675 34.2445 141.232 35.7411 140.576L160.94 85.0084H161.005Z" fill="#35CCA3"/>
                        <path d="M164.779 0.115995C165.69 -0.277636 166.666 0.378422 166.666 1.3625V55.7493C166.666 57.3238 165.755 58.7671 164.259 59.4232L39.0597 114.991C36.3917 116.172 33.4634 114.204 33.4634 111.317V60.9977C33.4634 59.4232 34.3745 57.9799 35.8712 57.3238L164.844 0.115995H164.779Z" fill="#35CCA3"/>
                    </svg>
                    <svg class="brand-logo-svg" viewBox="0 0 395 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M394.965 1.08691V54.7819H387.904V15.2046C387.904 15.0987 387.759 15.0679 387.716 15.1647L371.069 52.5129C370.453 53.8929 369.084 54.7819 367.573 54.7819C366.063 54.7819 364.695 53.8944 364.079 52.516L347.355 15.086C347.312 14.9893 347.167 15.0201 347.167 15.126V47.9128C347.167 51.7065 344.092 54.7819 340.298 54.7819H340.106V1.08691H347.074C347.461 1.08691 347.812 1.31422 347.97 1.66735L367.574 45.4706L387.178 1.66734C387.337 1.31422 387.687 1.08691 388.074 1.08691H394.965Z" fill="#35CCA3"/>
                        <path d="M306.731 55.324C301.713 55.324 297.135 54.1601 292.996 51.8323C288.858 49.4528 285.573 46.1679 283.142 41.9779C280.763 37.7361 279.573 32.977 279.573 27.7006C279.573 22.4242 280.763 17.691 283.142 13.5009C285.573 9.2591 288.858 5.97429 292.996 3.64647C297.135 1.26692 301.713 0.0771484 306.731 0.0771484C311.8 0.0771484 316.404 1.26692 320.542 3.64647C324.681 5.97429 327.94 9.23323 330.319 13.4233C332.699 17.6134 333.888 22.3725 333.888 27.7006C333.888 33.0287 332.699 37.7878 330.319 41.9779C327.94 46.1679 324.681 49.4528 320.542 51.8323C316.404 54.1601 311.8 55.324 306.731 55.324ZM306.731 49.1941C310.507 49.1941 313.895 48.3147 316.895 46.5559C319.947 44.7971 322.327 42.2882 324.034 39.0293C325.793 35.7704 326.672 31.9941 326.672 27.7006C326.672 23.3553 325.793 19.5791 324.034 16.3719C322.327 13.1129 319.973 10.6041 316.973 8.84527C313.973 7.08647 310.559 6.20707 306.731 6.20707C302.903 6.20707 299.489 7.08647 296.488 8.84527C293.488 10.6041 291.108 13.1129 289.35 16.3719C287.643 19.5791 286.789 23.3553 286.789 27.7006C286.789 31.9941 287.643 35.7704 289.35 39.0293C291.108 42.2882 293.488 44.7971 296.488 46.5559C299.54 48.3147 302.954 49.1941 306.731 49.1941Z" fill="#35CCA3"/>
                        <path d="M269.404 54.781C267.657 54.781 266.043 53.8529 265.164 52.3439L253.703 32.6667H247.13C246.046 32.6667 245.168 33.5454 245.168 34.6293V54.781H244.976C241.182 54.781 238.106 51.7056 238.106 47.9119V0.697998H255.565C259.652 0.697998 263.092 1.39635 265.885 2.79304C268.73 4.18973 270.851 6.07785 272.248 8.4574C273.644 10.8369 274.343 13.5527 274.343 16.6048C274.343 20.3293 273.257 23.6141 271.084 26.4592C268.963 29.3043 265.756 31.1924 261.462 32.1235L275.041 54.781H269.404ZM245.168 27.0023H255.565C259.393 27.0023 262.264 26.0712 264.178 24.209C266.092 22.295 267.049 19.7602 267.049 16.6048C267.049 13.3975 266.092 10.9145 264.178 9.15574C262.316 7.39694 259.445 6.51754 255.565 6.51754H245.168V27.0023Z" fill="#35CCA3"/>
                        <path d="M229.028 0.697998C232.199 0.697998 234.77 3.26876 234.77 6.43995H217.775V54.781H210.714V6.43995H198.73C195.559 6.43995 192.988 3.86919 192.988 0.697998H229.028Z" fill="#35CCA3"/>
                        <path d="M173.943 55.3245C170.374 55.3245 167.167 54.7037 164.322 53.4622C161.528 52.169 159.33 50.4102 157.726 48.1858C156.123 45.9097 155.295 43.2974 155.243 40.3488H159.225C161.238 40.3488 162.837 41.931 163.69 43.7551C164.211 44.8698 164.939 45.8812 165.874 46.7891C167.736 48.4962 170.426 49.3497 173.943 49.3497C177.306 49.3497 179.944 48.5221 181.858 46.8667C183.824 45.1597 184.806 42.987 184.806 40.3488C184.806 38.2797 184.237 36.5985 183.099 35.3052C181.961 34.012 180.539 33.0291 178.832 32.3567C177.125 31.6842 174.823 30.96 171.926 30.184C168.357 29.2529 165.486 28.3218 163.313 27.3907C161.192 26.4595 159.356 25.0111 157.804 23.0454C156.304 21.028 155.554 18.338 155.554 14.9756C155.554 12.0271 156.304 9.41473 157.804 7.13864C159.304 4.86255 161.399 3.10376 164.089 1.86226C166.831 0.620754 169.96 0 173.478 0C178.547 0 182.686 1.26737 185.893 3.8021C189.152 6.33684 190.988 9.69924 191.402 13.8893H187.108C185.128 13.8893 183.534 12.3229 182.44 10.6728C181.917 9.8837 181.232 9.14533 180.384 8.45774C178.47 6.85413 175.935 6.05233 172.779 6.05233C169.831 6.05233 167.425 6.82827 165.563 8.38015C163.701 9.8803 162.77 12.0012 162.77 14.7428C162.77 16.7086 163.313 18.3122 164.399 19.5537C165.537 20.7952 166.908 21.7522 168.512 22.4246C170.167 23.0454 172.469 23.7696 175.418 24.5973C178.987 25.5801 181.858 26.563 184.031 27.5458C186.203 28.477 188.065 29.9513 189.617 31.9687C191.169 33.9344 191.945 36.6243 191.945 40.0385C191.945 42.6767 191.247 45.1597 189.85 47.4875C188.453 49.8153 186.384 51.7034 183.643 53.1518C180.901 54.6003 177.668 55.3245 173.943 55.3245Z" fill="#35CCA3"/>
                        <path d="M139.788 26.8474C142.944 27.5199 145.479 29.0977 147.393 31.5807C149.307 34.0119 150.264 36.8053 150.264 39.9608C150.264 44.513 148.66 48.134 145.453 50.8239C142.297 53.4621 137.874 54.7812 132.184 54.7812H106.811V3.25419C106.811 1.62833 108.129 0.310303 109.755 0.310303H131.331C136.866 0.310303 141.185 1.57767 144.289 4.11241C147.444 6.64714 149.022 10.0871 149.022 14.4324C149.022 17.6396 148.169 20.3037 146.462 22.4246C144.806 24.5455 142.582 26.0198 139.788 26.8474ZM120.08 22.347H128.77C130.943 22.347 132.598 21.8814 133.736 20.9503C134.926 19.9674 135.521 18.5449 135.521 16.6826C135.521 14.8204 134.926 13.3978 133.736 12.415C132.598 11.4321 130.943 10.9407 128.77 10.9407H120.08V22.347ZM129.856 44.0733C132.081 44.0733 133.788 43.5818 134.978 42.599C136.219 41.5644 136.84 40.0901 136.84 38.1761C136.84 36.2622 136.193 34.762 134.9 33.6757C133.659 32.5894 131.926 32.0462 129.701 32.0462H120.08V44.0733H129.856Z" fill="#35CCA3"/>
                        <path d="M67.4624 0.310303V32.8997C67.4624 36.1587 68.2642 38.6676 69.8678 40.4264C71.4714 42.1852 73.8251 43.0646 76.9289 43.0646C80.0326 43.0646 82.4122 42.1852 84.0675 40.4264C85.7228 38.6676 86.5505 36.1587 86.5505 32.8997V0.310303H96.8752C98.501 0.310303 99.8191 1.62833 99.8191 3.25419V32.8222C99.8191 37.6847 98.7845 41.7972 96.7153 45.1596C94.6461 48.522 91.8528 51.0567 88.3352 52.7638C84.8693 54.4709 80.9896 55.3244 76.6961 55.3244C72.4025 55.3244 68.5487 54.4967 65.1346 52.8414C61.7722 51.1343 59.1081 48.5996 57.1424 45.2372C55.1767 41.823 54.1938 37.6847 54.1938 32.8222V0.310303H67.4624Z" fill="#35CCA3"/>
                        <path d="M44.2332 0.310303C45.8591 0.310303 47.1771 1.62833 47.1771 3.25419V54.7812H33.9085V32.3566H13.2686V54.7812H0V0.310303H13.2686V21.6486H33.9085V0.310303H44.2332Z" fill="#35CCA3"/>
                    </svg>
                </div>
                <button class="logout-btn" onclick="hubstromLogout()" title="Sair">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                    <span>Sair</span>
                </button>
            </div>
            <div class="page-header">
                <h1>Dashboard Comercial</h1>
                <p>Acompanhamento de vendas e performance comercial</p>
            </div>
        </header>

        <!-- Dashboard Container -->
        <div class="dashboard-container">
            <div class="loading-overlay" id="loadingOverlay">
                <div class="spinner"></div>
                <p>Carregando dashboard...</p>
            </div>
            <iframe
                id="lookerFrame"
                src="https://lookerstudio.google.com/embed/reporting/000b8c9f-c96a-4fae-954f-a04fc36b12d3"
                frameborder="0"
                allowfullscreen
                sandbox="allow-storage-access-by-user-activation allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"
                onload="hideLoading()">
            </iframe>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Habilitar transições do sidebar após carregamento
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                document.getElementById('sidebar').classList.add('ready');
            }, 50);
        });

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');

            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');

            if (sidebar.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        // Fechar sidebar com ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const sidebar = document.getElementById('sidebar');
                if (sidebar.classList.contains('active')) {
                    toggleSidebar();
                }
            }
        });

        // Ocultar loading quando iframe carregar
        function hideLoading() {
            setTimeout(function() {
                const overlay = document.getElementById('loadingOverlay');
                if (overlay) {
                    overlay.classList.add('hidden');
                }
            }, 500);
        }

        // Timeout para esconder loading mesmo se o iframe demorar
        setTimeout(hideLoading, 5000);
    </script>
</body>
</html>
